<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Disparos de Amor</title>
<style>
  :root{
    --bg1:#120824;
    --bg2:#2a0f4d;
    --accent:#ff5a8a;
    --accent2:#ffd1e0;
    --text:#fff7fe;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif}
  body{
    background: radial-gradient(1200px 600px at 50% 130%, #1a0a32 0%, var(--bg1) 40%, #0b0617 100%),
                radial-gradient(1000px 400px at 50% -10%, rgba(255,255,255,.06), rgba(255,255,255,0) 60%);
    color:var(--text);
  }

  /* Estrelas parallax simples */
  .stars, .stars:before, .stars:after{
    position:absolute; inset:0; content:""; display:block; pointer-events:none;
    background-repeat:repeat;
    animation: twinkle 8s linear infinite;
    opacity:.8;
  }
  .stars{
    background-image:
      radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.7) 50%, transparent 52%),
      radial-gradient(1px 1px at 70% 60%, rgba(255,255,255,.5) 50%, transparent 52%),
      radial-gradient(1.5px 1.5px at 40% 80%, rgba(255,255,255,.6) 50%, transparent 52%),
      radial-gradient(1px 1px at 85% 20%, rgba(255,255,255,.35) 50%, transparent 52%),
      radial-gradient(1px 1px at 10% 70%, rgba(255,255,255,.35) 50%, transparent 52%);
    background-size: 500px 500px, 600px 600px, 700px 700px, 800px 800px, 900px 900px;
  }
  .stars:before{
    animation-duration: 14s;
    background-image:
      radial-gradient(1px 1px at 15% 15%, rgba(255,255,255,.35) 50%, transparent 52%),
      radial-gradient(1.5px 1.5px at 55% 25%, rgba(255,255,255,.45) 50%, transparent 52%),
      radial-gradient(1px 1px at 75% 75%, rgba(255,255,255,.35) 50%, transparent 52%);
    background-size: 600px 600px, 800px 800px, 1000px 1000px;
  }
  .stars:after{
    animation-duration: 20s;
    background-image:
      radial-gradient(1px 1px at 35% 50%, rgba(255,255,255,.25) 50%, transparent 52%),
      radial-gradient(1px 1px at 90% 40%, rgba(255,255,255,.25) 50%, transparent 52%);
    background-size: 700px 700px, 900px 900px;
  }
  @keyframes twinkle{
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(10px)}
  }

  /* Personagens (minimalistas) */
  .lovers{
    position:absolute; inset:0; display:flex; align-items:flex-end; justify-content:space-between;
    padding:24px 36px; pointer-events:none;
  }
  .lover{
    width:64px; height:64px; border-radius:16px;
    background: linear-gradient(#fff,#f3e9ff);
    box-shadow: 0 8px 24px rgba(255,90,138,.25);
    position:relative; isolation:isolate;
  }
  .lover:before{ /* carinha :) */
    content:"";
    position:absolute; left:50%; top:14px; width:36px; height:36px; border-radius:50%;
    transform:translateX(-50%);
    background:linear-gradient(#fff,#ffeefd);
    box-shadow: inset 0 -2px 0 rgba(0,0,0,.04);
  }
  .lover:after{ /* coração no peito */
    content:""; position:absolute; bottom:10px; left:50%; transform:translateX(-50%) rotate(45deg);
    width:12px; height:12px; background:var(--accent); border-radius:2px;
    box-shadow:
      -6px 0 0 0 var(--accent),
      0 0 12px rgba(255,90,138,.6);
  }

  /* Frases */
  .quote-wrap{
    position:absolute; left:50%; top:8%; transform:translateX(-50%);
    width:min(92vw, 820px); text-align:center;
    padding:10px 18px; border-radius:14px;
    backdrop-filter: blur(2px);
  }
  .quote{
    font-size: clamp(18px, 3vw, 34px);
    line-height:1.25; letter-spacing:.2px;
    text-shadow: 0 2px 14px rgba(0,0,0,.35);
    min-height:2.5em;
  }
  .type{
    border-right: 2px solid var(--accent2);
    animation: caret 1s steps(1) infinite;
  }
  @keyframes caret{ 50%{ border-color: transparent } }

  /* Botões */
  .controls{
    position:absolute; left:50%; bottom:18px; transform:translateX(-50%);
    display:flex; gap:10px; z-index:5;
  }
  .btn{
    appearance:none; border:0; border-radius:999px; padding:10px 16px; font-weight:600;
    background:linear-gradient(180deg, #ff7aa6, #ff5a8a);
    color:white; cursor:pointer; box-shadow: 0 8px 24px rgba(255,90,138,.35);
  }
  .btn.secondary{ background:linear-gradient(180deg, #6d5bd0, #5b43c0) }

  /* Canvas ocupa a tela toda */
  canvas{position:absolute; inset:0; display:block}
</style>
</head>
<body>
  <div class="stars"></div>
  <canvas id="scene"></canvas>

  <div class="quote-wrap">
    <div id="quote" class="quote"></div>
  </div>

  <div class="lovers">
    <div class="lover" aria-hidden="true"></div>
    <div class="lover" aria-hidden="true"></div>
  </div>

  <div class="controls">
    <button id="next" class="btn">Outra frase</button>
    <button id="toggle" class="btn secondary">Pausar corações</button>
  </div>

<script>
/* ======= FRASES ======= */
const frases = [
  "Você é o meu lugar favorito no mundo.",
  "Cada batida do meu coração soletra o seu nome.",
  "Entre todas as estrelas, escolhi brilhar ao seu lado.",
  "Seu sorriso é o meu nascer do sol diário.",
  "Se amar é viajar, com você eu escolhi morar.",
  "Te encontrar foi como ouvir minha música preferida pela primeira vez."
];

/* ======= TYPEWRITER ======= */
const quoteEl = document.getElementById("quote");
let fraseIndex = 0, typing = false, timerFrase;

function typeFrase(texto, i=0){
  typing = true;
  quoteEl.classList.add("type");
  quoteEl.textContent = texto.slice(0, i);
  if(i < texto.length){
    const jitter = 15 + Math.random()*35;
    setTimeout(()=>typeFrase(texto, i+1), jitter);
  }else{
    typing = false;
    quoteEl.classList.remove("type");
    timerFrase = setTimeout(nextFrase, 3500);
  }
}
function nextFrase(){
  clearTimeout(timerFrase);
  fraseIndex = (fraseIndex + 1) % frases.length;
  typeFrase(frases[fraseIndex]);
}
typeFrase(frases[fraseIndex]);

document.getElementById("next").addEventListener("click", ()=>{
  if(typing) return;
  nextFrase();
});

/* ======= CENÁRIO DE CORAÇÕES (Canvas) ======= */
const canvas = document.getElementById("scene");
const ctx = canvas.getContext("2d", { alpha: true });

function resize(){
  const dpr = Math.min(window.devicePixelRatio || 1, 2);
  canvas.width = Math.floor(innerWidth * dpr);
  canvas.height = Math.floor(innerHeight * dpr);
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
addEventListener("resize", resize, { passive:true });
resize();

function drawHeart(x,y,size,alpha=1,rot=0){
  ctx.save();
  ctx.translate(x,y);
  ctx.rotate(rot);
  ctx.scale(size,size);
  ctx.globalAlpha = alpha;
  ctx.fillStyle = "#ff5a8a";
  ctx.beginPath();
  // Coração a partir de dois círculos + triângulo curvo
  ctx.moveTo(0, 0);
  ctx.bezierCurveTo(0, -3, -3, -3, -3, 0);
  ctx.bezierCurveTo(-3, 2.5, -1.5, 3.4, 0, 5);
  ctx.bezierCurveTo(1.5, 3.4, 3, 2.5, 3, 0);
  ctx.bezierCurveTo(3, -3, 0, -3, 0, 0);
  ctx.closePath();
  ctx.fill();
  ctx.restore();
}

class Particle{
  constructor(x,y,vx,vy,life,size,spin=0){
    this.x=x; this.y=y; this.vx=vx; this.vy=vy;
    this.life=life; this.max=life; this.size=size; this.spin=spin;
  }
  step(dt){
    this.life -= dt;
    this.x += this.vx*dt; this.y += this.vy*dt;
    this.vx *= 0.995; // leve arrasto
    this.vy += 10*dt; // gravidade suave
    this.spin += 2*dt;
  }
  draw(){
    const a = Math.max(this.life/this.max,0);
    drawHeart(this.x, this.y, this.size*(0.6+a*0.8), a, this.spin);
  }
}

class Bullet{
  constructor(side){
    const pad = 60;
    this.side = side; // "left" | "right"
    this.y = canvas.height/2 / (window.devicePixelRatio||1);
    this.x = side==="left" ? pad : innerWidth - pad;
    const targetX = innerWidth/2 + (Math.random()*40-20);
    const targetY = innerHeight*0.35 + (Math.random()*40-20);
    const dx = targetX - this.x;
    const dy = targetY - this.y;
    const len = Math.hypot(dx,dy);
    const speed = 280 + Math.random()*40;
    this.vx = dx/len*speed;
    this.vy = dy/len*speed;
    this.alive = true;
  }
  step(dt){
    this.x += this.vx*dt;
    this.y += this.vy*dt;
    // trilha de mini corações
    particles.push(new Particle(this.x, this.y, 0, 0, 0.7, 0.9, Math.random()*3));
    // encontro no centro -> explosão
    if( (this.side==="left" && this.x >= innerWidth/2) ||
        (this.side==="right" && this.x <= innerWidth/2)){
      this.alive = false;
      burst(this.x, this.y);
    }
  }
  draw(){
    drawHeart(this.x, this.y, 1.6, 1, 0);
  }
}

const particles = [];
let bullets = [];
let running = true;
let acc = 0;

function burst(x,y){
  const n = 60;
  for(let i=0;i<n;i++){
    const ang = (i/n)*Math.PI*2 + Math.random()*0.3;
    const sp = 90 + Math.random()*120;
    const vx = Math.cos(ang)*sp;
    const vy = Math.sin(ang)*sp - 40;
    particles.push(new Particle(x,y,vx,vy, 1+Math.random()*1.2, 1+Math.random()*0.8, Math.random()*6));
  }
  // desenha um coração maior que se desfaz
  for(let i=0;i<22;i++){
    const a = (i/22)*Math.PI*2;
    const r = 26;
    const px = x + r*16*Math.pow(Math.sin(a),3)/18;
    const py = y - r*(13*Math.cos(a)-5*Math.cos(2*a)-2*Math.cos(3*a)-Math.cos(4*a))/18;
    const jitter = (Math.random()*2-1);
    particles.push(new Particle(px+jitter,py+jitter, (Math.random()*40-20), (Math.random()*40-20)-20, 1.4, 0.9, Math.random()*6));
  }
}

function shootPair(){
  bullets.push(new Bullet("left"));
  bullets.push(new Bullet("right"));
}

let last = performance.now();
function tick(t){
  const dt = Math.min((t-last)/1000, 0.033); last=t;
  if(running){
    acc += dt;
    if(acc > 2.6){ // intervalo entre encontros
      shootPair();
      acc = 0;
    }
  }

  ctx.clearRect(0,0,innerWidth,innerHeight);

  // atualizar/desenhar balas
  bullets = bullets.filter(b=>b.alive);
  for(const b of bullets){ b.step(dt); b.draw(); }

  // atualizar/desenhar partículas
  for(let i=particles.length-1;i>=0;i--){
    const p = particles[i];
    p.step(dt);
    p.draw();
    if(p.life<=0 || p.y>innerHeight+80) particles.splice(i,1);
  }
  requestAnimationFrame(tick);
}
requestAnimationFrame(tick);

document.getElementById("toggle").addEventListener("click", (e)=>{
  running = !running;
  e.currentTarget.textContent = running ? "Pausar corações" : "Retomar corações";
});

// clique solta um disparo especial no ponto
canvas.addEventListener("click", (ev)=>{
  const rect = canvas.getBoundingClientRect();
  const x = ev.clientX - rect.left;
  const y = ev.clientY - rect.top;
  burst(x,y);
});
</script>
</body>
</html>
